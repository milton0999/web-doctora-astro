---
interface Props {
  servicio: any;  // Temporal, usaremos any hasta que arreglemos los tipos
  showPrice?: boolean;
}

const { servicio, showPrice = true } = Astro.props;
---

<div class="servicio-card {servicio.data.featured ? 'featured' : ''} col-md-4 mb-4">
  <div class="card h-100 shadow-sm border-0">
    <div class="card-image-container position-relative">
      {servicio.data.image ? (
        <img 
          src={servicio.data.image} 
          alt={servicio.data.title}
          class="card-img-top"
          style="height: 200px; object-fit: cover;"
        />
      ) : (
        <div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 200px;">
          <span class="text-muted">Sin imagen</span>
        </div>
      )}
      {servicio.data.featured && (
        <span class="featured-badge position-absolute top-0 end-0 m-2 badge bg-success">‚≠ê Popular</span>
      )}
    </div>
    
    <div class="card-body d-flex flex-column">
      <div class="card-header bg-white border-0 p-0 mb-2">
        <span class="categoria-badge badge bg-primary mb-2">{servicio.data.categoria}</span>
        <h5 class="card-title fw-bold">{servicio.data.title}</h5>
      </div>
      
      <p class="card-text text-muted small">{servicio.data.description}</p>
      
      {showPrice && servicio.data.price && (
        <div class="price-section mt-auto mb-3">
          <div class="p-3 bg-light rounded text-center">
            <span class="price h4 text-primary mb-0 d-block">${servicio.data.price}</span>
            {servicio.data.duration && (
              <span class="duration text-muted small">‚è±Ô∏è {servicio.data.duration}</span>
            )}
          </div>
        </div>
      )}
      
      <div class="card-actions mt-auto d-grid gap-2">
        <a href={`/servicios/${servicio.slug}`} class="btn btn-primary">
          Ver Detalles
        </a>
        <a href={`https://wa.me/528115883775?text=Hola, estoy interesado en: ${servicio.data.title}`} 
           class="btn btn-success" target="_blank">
          üí¨ WhatsApp
        </a>
      </div>
    </div>
  </div>
</div>

<style>
.servicio-card:hover .card {
  transform: translateY(-8px);
  box-shadow: var(--shadow-xl);
}

.servicio-card .card {
  transition: all 0.4s ease;
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid var(--border-color);
  background: var(--bg-white);
}

.servicio-card .card-image-container {
  position: relative;
  overflow: hidden;
}

.servicio-card .card-image-container img {
  transition: transform 0.4s ease;
}

.servicio-card:hover .card-image-container img {
  transform: scale(1.05);
}

.categoria-badge {
  font-size: 0.75rem;
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.5px;
  background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-hover) 100%);
  color: var(--bg-white);
}

.featured-badge {
  font-size: 0.8rem;
  font-weight: bold;
  background: linear-gradient(135deg, var(--warning-color) 0%, #d97706 100%);
  border: none;
  padding: 6px 12px;
  border-radius: 20px;
}

.price-section {
  background: linear-gradient(135deg, var(--bg-light) 0%, #f8fafc 100%);
  border: 1px solid var(--border-light);
  border-radius: 12px;
  margin: var(--spacing-md) 0;
}

.price-section .price {
  font-weight: 700;
  color: var(--primary-color);
  font-size: 1.5rem;
}

.price-section .duration {
  color: var(--text-muted);
  font-size: 0.85rem;
  margin-top: var(--spacing-xs);
}

.btn-primary {
  border-radius: 10px;
  font-weight: 600;
  padding: var(--spacing-md) var(--spacing-lg);
  transition: all 0.3s ease;
  background: var(--primary-color);
  border: 2px solid var(--primary-color);
}

.btn-primary:hover {
  background: var(--primary-hover);
  border-color: var(--primary-hover);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.btn-success {
  border-radius: 10px;
  font-weight: 600;
  padding: var(--spacing-md) var(--spacing-lg);
  transition: all 0.3s ease;
  background: linear-gradient(135deg, var(--success-color) 0%, #059669 100%);
  border: 2px solid var(--success-color);
}

.btn-success:hover {
  background: linear-gradient(135deg, #059669 0%, #047857 100%);
  border-color: #059669;
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.card-actions {
  gap: var(--spacing-sm);
}

@media (max-width: 768px) {
  .servicio-card:hover .card {
    transform: translateY(-4px);
  }

  .categoria-badge {
    font-size: 0.7rem;
  }

  .price-section .price {
    font-size: 1.3rem;
  }
}
</style>