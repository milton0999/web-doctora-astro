---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const aboutData = await getCollection('aboutUs');
const team = await getCollection('team');
const settings = await getCollection('settings');

const siteSettings = settings[0]?.data || {
  site_name: 'Centro M√©dico Gonzalitos',
  whatsapp_number: '528115883775'
};

const content = aboutData[0]?.data || {
  hero_title: "Sobre Centro M√©dico Gonzalitos",
  hero_subtitle: "Cuidando tu salud con la mejor tecnolog√≠a y atenci√≥n humana",
  mission_title: "Nuestra Misi√≥n",
  mission_content: "En el Centro M√©dico Gonzalitos nos comprometemos a brindar atenci√≥n m√©dica de la m√°s alta calidad...",
  mission_stats: [
    { number: "10+", label: "A√±os de Experiencia" },
    { number: "5000+", label: "Pacientes Atendidos" },
    { number: "100%", label: "Satisfacci√≥n Garantizada" }
  ],
  values: [
    { icon: "üè•", title: "Tecnolog√≠a Avanzada", description: "Equipos de √∫ltima generaci√≥n" },
    { icon: "üë®‚Äç‚öïÔ∏è", title: "Profesionales Certificados", description: "M√©dicos especializados" },
    { icon: "‚ù§Ô∏è", title: "Atenci√≥n Personalizada", description: "Trato cercano y humano" },
    { icon: "‚ö°", title: "Resultados R√°pidos", description: "Entrega oportuna" }
  ],
  team_title: "Nuestro Equipo M√©dico",
  show_team: true,
  cta_title: "¬øListo para tu estudio m√©dico?",
  cta_description: "Agenda tu cita hoy mismo",
  cta_button_text: "Agendar Cita",
  cta_button_link: "/contacto",
  location_title: "Ubicaci√≥n y Contacto",
  address: "Av. Dr. Jos√© Eleuterio Gonz√°lez 135, Leones, 64600 Monterrey, N.L.",
  phone: "81 1588 3775",
  hours: "Lunes a Viernes: 8:00 AM - 8:00 PM | S√°bados: 8:00 AM - 2:00 PM",
  seo_title: "Sobre Nosotros - Centro M√©dico Gonzalitos",
  seo_description: "Conoce nuestro equipo m√©dico y nuestra misi√≥n"
};
---

<Layout title={content.seo_title} description={content.seo_description}>
    <!-- Hero Section -->
    <section class="hero-section py-5" style="background: linear-gradient(135deg, var(--primary-color) 0%, #1e3a8a 100%);">
        <div class="container text-center">
            <h1 class="display-4 fw-bold text-white mb-3">{content.hero_title}</h1>
            <p class="lead text-white-50">{content.hero_subtitle}</p>
        </div>
    </section>

    <!-- Mission Section -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h2 class="mb-4">{content.mission_title}</h2>
                    <p class="lead text-muted mb-5">{content.mission_content}</p>

                    <!-- Stats -->
                    <div class="row">
                        {content.mission_stats.map(stat => (
                            <div class="col-md-4 mb-4">
                                <div class="stat-item">
                                    <h3 class="text-primary fw-bold">{stat.number}</h3>
                                    <p class="text-muted mb-0">{stat.label}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Values Section -->
    {content.values && content.values.length > 0 && (
        <section class="py-5 bg-light">
            <div class="container">
                <h2 class="text-center mb-5">¬øPor qu√© elegirnos?</h2>
                <div class="row">
                    {content.values.map(value => (
                        <div class="col-md-6 col-lg-3 mb-4">
                            <div class="text-center">
                                <div class="value-icon mb-3">
                                    <span style="font-size: 3rem;">{value.icon}</span>
                                </div>
                                <h5 class="mb-2">{value.title}</h5>
                                <p class="text-muted small">{value.description}</p>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        </section>
    )}

    <!-- Team Section -->
    {content.show_team && team.length > 0 && (
        <section class="py-5">
            <div class="container">
                <h2 class="text-center mb-5">{content.team_title}</h2>
                <div class="row g-4">
                    {team.map(member => (
                        <div class="col-md-6 col-lg-4">
                            <div class="card h-100 shadow-sm team-card border-0 text-center">
                                <div class="card-body">
                                    {member.data.photo ? (
                                        <img src={member.data.photo} alt={member.data.name} class="rounded-circle mb-3"
                                              style="width: 150px; height: 150px; object-fit: cover;" />
                                    ) : (
                                        <div class="rounded-circle mb-3 bg-primary d-flex align-items-center justify-content-center mx-auto"
                                              style="width: 150px; height: 150px;">
                                            <span class="text-white h3">üë®‚Äç‚öïÔ∏è</span>
                                        </div>
                                    )}
                                    <h5 class="card-title">{member.data.name}</h5>
                                    <p class="text-primary fw-bold">{member.data.position}</p>
                                    {member.data.experience_years && (
                                        <p class="text-muted small">üìÖ {member.data.experience_years} a√±os de experiencia</p>
                                    )}
                                    {member.data.specialties && (
                                        <div class="mb-2">
                                            {member.data.specialties.map(specialty => (
                                                <span class="badge bg-light text-dark me-1">{specialty}</span>
                                            ))}
                                        </div>
                                    )}
                                    <div class="card-text text-muted small">
                                        {member.data.bio}
                                    </div>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        </section>
    )}

    <!-- CTA Section -->
    <section class="py-5 cta-section" style="background: linear-gradient(135deg, var(--primary-color) 0%, #1e3a8a 100%);">
        <div class="container text-center">
            <h2 class="text-white mb-4">{content.cta_title}</h2>
            <p class="lead text-white-50 mb-4">{content.cta_description}</p>
            <a href={content.cta_button_link} class="btn btn-light btn-lg fw-bold px-4">
                {content.cta_button_text}
            </a>
        </div>
    </section>

    <!-- Location Section -->
    <section class="py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h2 class="mb-4">{content.location_title}</h2>
                    <div class="mb-3">
                        <strong class="text-primary">üìç Direcci√≥n:</strong><br>
                        {content.address}
                    </div>
                    <div class="mb-3">
                        <strong class="text-primary">üìû Tel√©fono:</strong><br>
                        {content.phone}
                    </div>
                    <div class="mb-3">
                        <strong class="text-primary">üïí Horarios:</strong><br>
                        {content.hours}
                    </div>
                </div>
                {content.map_embed && (
                    <div class="col-lg-6">
                        <div class="ratio ratio-16x9">
                            <iframe src={content.map_embed} allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>
                    </div>
                )}
            </div>
        </div>
    </section>
</Layout>

<style>
.team-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-radius: 12px;
}

.team-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 24px rgba(0,0,0,0.15);
}

.stat-item h3 {
    font-weight: bold;
    margin-bottom: 0;
}

.badge {
    font-size: 0.7rem;
}

.fade-in-up {
    animation: fadeInUp 0.6s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</style>